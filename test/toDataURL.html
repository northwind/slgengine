<!DOCTYPE html> 
<html> 
<head> 
	<meta charset="utf-8"> 
	<title>DataURL</title> 
	<style>
		img{ position:absolute; }
		.move { cursor: move; }
		body{ width:100%; height:800px; }
	</style>
	<script src="../lib/jquery/jquery-1.4.2.min.js" type="text/javascript" charset="utf-8"></script> 
	<script> 
		$( function(){
			
			var w = 240, h = 171;
			var 
			CELL_WIDTH	= 50,
			CELL_HEIGHT	= CELL_WIDTH,
			CELL_XNUM	= 25,
			CELL_YNUM	= 25,
			
			MAX_H = CELL_HEIGHT * CELL_YNUM,
			MAX_W = CELL_WIDTH * CELL_XNUM;
			
			var ctx = document.getElementById('canvas').getContext('2d');  
			
			ctx.fillStyle = "#ff0000"
			ctx.fillRect( 0, 0 , 400, 400 );

		   var lineargradient = ctx.createLinearGradient(0,0,150,150);  
		   lineargradient.addColorStop(0,'white');  
		   lineargradient.addColorStop(1,'black');  
   			
			ctx.strokeStyle  = lineargradient;			
			ctx.shadowOffsetX = 50;  
			ctx.shadowOffsetY = 50;  
			ctx.shadowBlur = 50;  
			ctx.shadowColor = "rgba(0, 0, 0, 0.5)";  		
			var we = 50, half = we / 2;	
			
			ctx.translate( half, half  );
			
			ctx.lineWidth = we;
			
			//ctx.strokeRect( 100 + half, 100 +half  , 200 - we, 200 -we );
			ctx.strokeRect( 100 , 100  , 200 -we , 200 -we );
			
			var str = document.getElementById('canvas').toDataURL();
			alert( str );						
		} );
		

		
		
			
	</script> 
</head> 
<body id="canvasdemo"> 
	<canvas id="canvas" width="400" height="400" ></canvas> 
</body> 
<script></script>
</html>